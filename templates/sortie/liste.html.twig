{% extends('base.html.twig') %}
{% block title %} Liste des sorties {% endblock %}

{% block body %}
    <div class="container-fluid">
        <h2>Filtrer les sorties</h2>


        <form action="{{ path('page_sortie') }}">

            <div class="row">
                <div class="col-sm-4 d-flex">
                <label for="site">Site </label>
                <select class="form-control" id="site" name="site">
                    {% for site in sites %}
                        <option value="{{ site.id }}">{{ site.nom }}</option>
                    {% endfor %}
                </select>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-4 d-flex">
                    <label for="texteRecherche">Le nom de la sortie contient : </label>
                    <input type="text" id="texteRecherche" name="texteRecherche">
                </div>
            </div>
            <div class="row">
                <div class="col-sm-4 d-flex">
                    <label for="heureDebut">Entre : </label>
                    <input type="date" id="heureDebut" name="heureDebut">

                    <label for="heureFin"> et : </label>
                    <input type="date" id="heureFin" name="heureFin">
                </div>
            </div>

            <div class="form-check">
                <label class="form-check-label">
                    <input type="checkbox" class="form-check-input" name="estOrganisateur" value="1">Sorties dont je suis l'organisateur/trice
                </label>
            </div>
            <div class="form-check">
                <label class="form-check-label">
                    <input type="checkbox" class="form-check-input" name="estInscrit" value="1">Sorties auxquelles je suis inscrit/e
                </label>
            </div>
            <div class="form-check">
                <label class="form-check-label">
                    <input type="checkbox" class="form-check-input" name="estPasInscrit" value="1">Sorties auxquelles je ne suis pas inscrit/e
                </label>
            </div>
            <div class="form-check">
                <label class="form-check-label">
                    <input type="checkbox" class="form-check-input" name="estSortiePassee" value="1">Sorties passées
                </label>
            </div>
            <button type="submit" class="btn btn-primary">Rechercher</button>
        </form>

        <div class="row">
            <!--<div class="card-columns align-items-stretch">-->
        {% for sortie in sorties %}
            <div class="col-sm-3 d-flex align-items-stretch">
                    <div class="card">
                        {% if sortie.id is divisible by (2) %}
                            <img class="card-img-top" src="{{ asset("images/thabor.jpg") }}" alt="Card image cap">
                        {% else %}
                            <img class="card-img-top" src="{{ asset("images/thabor2.jpg") }}" alt="Card image cap">
                        {% endif %}

                        <div class="card-body">
                            <h5 class="card-title">{{ sortie.nom }}</h5>
                            <p class="card-text">{{ sortie.infosSortie|striptags|slice(0,50) }}
                                {% if sortie.infosSortie|length > 50 %}
                                    [...]
                                {% endif %}
                                <br>
                                Inscrits : x/{{ sortie.nbInscriptionMax }}
                                <br>
                                À {{ sortie.Lieu.Ville.Nom }} le {{ sortie.dateHeureDebut|date("d/m/Y") }}
                            </p>

                        </div>
                        <a href="{{ path('page_detail_sortie', {'id' : sortie.id}) }}" class="btn btn-secondary">Plus d'informations</a>
                    </div>
            </div>
        {% endfor %}
        <!-- </div> -->
        </div>
        <br>
        <a href="{{ path('page_creer_sortie') }}" class="btn btn-primary">Créer une nouvelle sortie</a>
    </div>
{% endblock %}